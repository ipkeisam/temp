Date: Fri, 18 Dec 2020 15:38:11 -0800 (PST)
Message-ID: <683052347.26417.1608334691236@x278942.cguser.capgroup.com>
Subject: Exported From Confluence
MIME-Version: 1.0
Content-Type: multipart/related; 
	boundary="----=_Part_26416_1119486648.1608334691236"

------=_Part_26416_1119486648.1608334691236
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
Content-Location: file:///C:/exported.html

<html xmlns:o=3D'urn:schemas-microsoft-com:office:office'
      xmlns:w=3D'urn:schemas-microsoft-com:office:word'
      xmlns:v=3D'urn:schemas-microsoft-com:vml'
      xmlns=3D'urn:w3-org-ns:HTML'>
<head>
    <meta http-equiv=3D"Content-Type" content=3D"text/html; charset=3Dutf-8=
">
    <title>Moving Application from SNX1 to SNX2</title>
    <!--[if gte mso 9]>
    <xml>
        <o:OfficeDocumentSettings>
            <o:TargetScreenSize>1024x640</o:TargetScreenSize>
            <o:PixelsPerInch>72</o:PixelsPerInch>
            <o:AllowPNG/>
        </o:OfficeDocumentSettings>
        <w:WordDocument>
            <w:View>Print</w:View>
            <w:Zoom>90</w:Zoom>
            <w:DoNotOptimizeForBrowser/>
        </w:WordDocument>
    </xml>
    <![endif]-->
    <style>
                <!--
        @page Section1 {
            size: 8.5in 11.0in;
            margin: 1.0in;
            mso-header-margin: .5in;
            mso-footer-margin: .5in;
            mso-paper-source: 0;
        }

        table {
            border: solid 1px;
            border-collapse: collapse;
        }

        table td, table th {
            border: solid 1px;
            padding: 5px;
        }

        td {
            page-break-inside: avoid;
        }

        tr {
            page-break-after: avoid;
        }

        div.Section1 {
            page: Section1;
        }

        /* Confluence print stylesheet. Common to all themes for print medi=
a */
/* Full of !important until we improve batching for print CSS */

@media print {
    #main {
        padding-bottom: 1em !important; /* The default padding of 6em is to=
o much for printouts */
    }

    body {
        font-family: Arial, Helvetica, FreeSans, sans-serif;
        font-size: 10pt;
        line-height: 1.2;
    }

    body, #full-height-container, #main, #page, #content, .has-personal-sid=
ebar #content {
        background: #fff !important;
        color: #000 !important;
        border: 0 !important;
        width: 100% !important;
        height: auto !important;
        min-height: auto !important;
        margin: 0 !important;
        padding: 0 !important;
        display: block !important;
    }

    a, a:link, a:visited, a:focus, a:hover, a:active {
        color: #000;
    }

    #content h1,
    #content h2,
    #content h3,
    #content h4,
    #content h5,
    #content h6 {
        font-family: Arial, Helvetica, FreeSans, sans-serif;
        page-break-after: avoid;
    }

    pre {
        font-family: Monaco, "Courier New", monospace;
    }

    #header,
    .aui-header-inner,
    #navigation,
    #sidebar,
    .sidebar,
    #personal-info-sidebar,
    .ia-fixed-sidebar,
    .page-actions,
    .navmenu,
    .ajs-menu-bar,
    .noprint,
    .inline-control-link,
    .inline-control-link a,
    a.show-labels-editor,
    .global-comment-actions,
    .comment-actions,
    .quick-comment-container,
    #addcomment {
        display: none !important;
    }

    /* CONF-28544 cannot print multiple pages in IE */
    #splitter-content {
        position: relative !important;
    }

    .comment .date::before {
        content: none !important; /* remove middot for print view */
    }

    h1.pagetitle img {
        height: auto;
        width: auto;
    }

    .print-only {
        display: block;
    }

    #footer {
        position: relative !important; /* CONF-17506 Place the footer at en=
d of the content */
        margin: 0;
        padding: 0;
        background: none;
        clear: both;
    }

    #poweredby {
        border-top: none;
        background: none;
    }

    #poweredby li.print-only {
        display: list-item;
        font-style: italic;
    }

    #poweredby li.noprint {
        display: none;
    }

    /* no width controls in print */
    .wiki-content .table-wrap,
    .wiki-content p,
    .panel .codeContent,
    .panel .codeContent pre,
    .image-wrap {
        overflow: visible !important;
    }

    /* TODO - should this work? */
    #children-section,
    #comments-section .comment,
    #comments-section .comment .comment-body,
    #comments-section .comment .comment-content,
    #comments-section .comment p {
        page-break-inside: avoid;
    }

    #page-children a {
        text-decoration: none;
    }

    /**
     hide twixies

     the specificity here is a hack because print styles
     are getting loaded before the base styles. */
    #comments-section.pageSection .section-header,
    #comments-section.pageSection .section-title,
    #children-section.pageSection .section-header,
    #children-section.pageSection .section-title,
    .children-show-hide {
        padding-left: 0;
        margin-left: 0;
    }

    .children-show-hide.icon {
        display: none;
    }

    /* personal sidebar */
    .has-personal-sidebar #content {
        margin-right: 0px;
    }

    .has-personal-sidebar #content .pageSection {
        margin-right: 0px;
    }

    .no-print, .no-print * {
        display: none !important;
    }
}
-->
    </style>
</head>
<body>
    <h1>Moving Application from SNX1 to SNX2</h1>
    <div class=3D"Section1">
        <p>This document is based on the following article.</p>
<p><a class=3D"external-link" href=3D"https://docs.openshift.com/dedicated/=
3/admin_guide/assembly_backing-up-restoring-project-application.html" rel=
=3D"nofollow">https://docs.openshift.com/dedicated/3/admin_guide/assembly_b=
acking-up-restoring-project-application.html</a></p>
<p><a class=3D"external-link" href=3D"https://docs.portworx.com/portworx-in=
stall-with-kubernetes/disaster-recovery/async-dr/" rel=3D"nofollow">https:/=
/docs.portworx.com/portworx-install-with-kubernetes/disaster-recovery/async=
-dr/</a></p>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-SNX1andSNX2clusterURL">SNX1 and S=
NX2 cluster URL&nbsp;</h2>
<p><a class=3D"external-link" href=3D"https://ocp-console.prod-int-snx1.cap=
group.com/" rel=3D"nofollow">https://ocp-console.prod-int-snx1.capgroup.com=
/</a></p>
<p><a class=3D"external-link" href=3D"https://ocp-console.prod-int-snx1.cap=
group.com/" rel=3D"nofollow">https://ocp-console.prod-int-snx2.capgroup.com=
/</a></p>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-ConfigureSNX2cluster">Configure S=
NX2 cluster&nbsp;&nbsp;</h2>
<ol>
<li><p>Log into SNX1 cluster to retrieve sync_whitelist.txt file. Copy this=
 file over from SNX1 to SNX2 cluster&nbsp;</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"java plain" style=3D"text-align: left;">ls /root/=
ad-sync/sync_whitelist.txt</code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li><p>Run ocpGroupSync.sh from Openshift 3.11, SNX2 to pull in the require=
d AD groups.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash plain" style=3D"text-align: left;">/etc/cron=
</code><code class=3D"bash plain" style=3D"text-align: left;">.hourly</code=
><code class=3D"bash plain" style=3D"text-align: left;">/ocpGroupSync</code=
><code class=3D"bash plain" style=3D"text-align: left;">.sh</code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li><p style=3D"text-align: left;">Add a label to the default project<br><b=
r></p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash plain" style=3D"text-align: left;">oc label =
namespace default name=3Ddefault</code></p></td>
</tr>
</tbody>
</table>
</div></li>
</ol>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-BackupapplicationdatainSNX1">Back=
up application data in SNX1</h2>
<p>This section will be automated with Ansible Playbook. A cron job will be=
 created to back up the SNX1 data once a day.&nbsp;</p>
<p>The playbook will run the steps as follows:</p>
<p><br></p>
<ol>
<li><p><span style=3D"color: rgb(84,84,84);">Get the application data<span>=
&nbsp;</span></span><code style=3D"text-align: left;"><strong>mountPath</st=
rong></code><span style=3D"color: rgb(84,84,84);"><span>&nbsp;</span>from t=
he<span>&nbsp;</span></span><code style=3D"text-align: left;"><strong>deplo=
ymentconfig</strong></code><span style=3D"color: rgb(84,84,84);">:</span></=
p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc ge=
t dc/jenkins -o jsonpath=3D'{ .spec.template.spec.containers[?(@.name=3D=3D=
"jenkins")].volumeMounts[?(@.name=3D=3D"jenkins-data")].mountPath }'
/var/lib/jenkins</pre>=20
</div>
</div></li>
<li><p><span style=3D"color: rgb(84,84,84);">Get the name of the pod that i=
s currently running:</span></p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc ge=
t pod --selector=3Ddeploymentconfig=3Djenkins -o jsonpath=3D'{ .metadata.na=
me }'
jenkins-1-37nux</pre>=20
</div>
</div></li>
<li><p><span style=3D"color: rgb(84,84,84);">Copy application data to backu=
p directory:</span></p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc rs=
ync jenkins-1-37nux:/var/lib/jenkins /tmp/jenkins-backup
</pre>=20
</div>
</div></li>
<li>Copy the /tmp/backup application data from SNX1 to SNX2. SNX1 bastion h=
as access to both SNX1 and SNX2 clusters.</li>
</ol>
<p><br></p>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-BackupProjectsinSNX1">Backup Proj=
ects in SNX1</h2>
<ol>
<li><p>Log into the SNX1 bastion server.&nbsp; Make sure the project backup=
 directory is up to date.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash plain" style=3D"text-align: left;">[ec2-user=
@ip-10-244-161-71 ~]$<span>&nbsp;</span></code><code class=3D"bash function=
s" style=3D"text-align: left;">ls</code><span>&nbsp;</span><code class=3D"b=
ash plain" style=3D"text-align: left;">-l ocp_project_backup/</code><br><co=
de class=3D"bash plain" style=3D"text-align: left;">total 8268</code><br><c=
ode class=3D"bash plain" style=3D"text-align: left;">-rw-r--r--.&nbsp; 1 ec=
2-user ec2-user 1205331 Aug 19 20:29 int-dev-us-west-1.2019-08-19.</code><c=
ode class=3D"bash functions" style=3D"text-align: left;">tar</code><code cl=
ass=3D"bash plain" style=3D"text-align: left;">.gz</code><br><code class=3D=
"bash plain" style=3D"text-align: left;">-rw-r--r--.&nbsp; 1 ec2-user ec2-u=
ser 1206371 Aug 20 20:28 int-dev-us-west-1.2019-08-20.</code><code class=3D=
"bash functions" style=3D"text-align: left;">tar</code><code class=3D"bash =
plain" style=3D"text-align: left;">.gz</code><br><code class=3D"bash plain"=
 style=3D"text-align: left;">-rw-r--r--.&nbsp; 1 ec2-user ec2-user 1208084 =
Aug 21 20:29 int-dev-us-west-1.2019-08-21.</code><code class=3D"bash functi=
ons" style=3D"text-align: left;">tar</code><code class=3D"bash plain" style=
=3D"text-align: left;">.gz</code><br><code class=3D"bash plain" style=3D"te=
xt-align: left;">-rw-r--r--.&nbsp; 1 ec2-user ec2-user 1207556 Aug 22 20:29=
 int-dev-us-west-1.2019-08-22.</code><code class=3D"bash functions" style=
=3D"text-align: left;">tar</code><code class=3D"bash plain" style=3D"text-a=
lign: left;">.gz</code><br><code class=3D"bash plain" style=3D"text-align: =
left;">-rw-r--r--.&nbsp; 1 ec2-user ec2-user 1209426 Aug 23 20:30 int-dev-u=
s-west-1.2019-08-23.</code><code class=3D"bash functions" style=3D"text-ali=
gn: left;">tar</code><code class=3D"bash plain" style=3D"text-align: left;"=
>.gz</code><br><code class=3D"bash plain" style=3D"text-align: left;">-rw-r=
--r--.&nbsp; 1 ec2-user ec2-user 1206655 Aug 24 20:29 int-dev-us-west-1.201=
9-08-24.</code><code class=3D"bash functions" style=3D"text-align: left;">t=
ar</code><code class=3D"bash plain" style=3D"text-align: left;">.gz</code><=
br><code class=3D"bash plain" style=3D"text-align: left;">-rw-r--r--.&nbsp;=
 1 ec2-user ec2-user 1204886 Aug 25 20:29 int-dev-us-west-1.2019-08-25.</co=
de><code class=3D"bash functions" style=3D"text-align: left;">tar</code><co=
de class=3D"bash plain" style=3D"text-align: left;">.gz</code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li><p>If the project backup does not exists, or you want to get the latest=
 project backup, run the playbook below.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"java plain" style=3D"text-align: left;">ansible-p=
laybook playbooks/day2_ocp_project_backup.yml -e<span>&nbsp;</span></code><=
code class=3D"java string" style=3D"text-align: left;">"master_hostname=3D<=
a class=3D"external-link" href=3D"http://ip-10-244-161-82.us" rel=3D"nofoll=
ow">ip-10-244-161-82.us</a>-west-1.compute.internal env_var_file=3Dint_dev_=
us_west_1.yml"</code><br>&nbsp;<br><code class=3D"java plain" style=3D"text=
-align: left;">https:</code><code class=3D"java comments" style=3D"text-ali=
gn: left;">//<a class=3D"external-link" href=3D"http://bitbucket.capgroup.c=
om/projects/PLAT/repos/cloud_automation/browse/AWS/compute/ansible/playbook=
s/day2_ocp_project_backup.yml" rel=3D"nofollow">bitbucket.capgroup.com/proj=
ects/PLAT/repos/cloud_automation/browse/AWS/compute/ansible/playbooks/day2_=
ocp_project_backup.yml</a></code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li><p>If you are running into issue using the playbook from the last step,=
 you can run the oc commands to export the project objects as follows.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><br></p><pre class=3D"nowrap">$ oc get -o yaml --export all &gt;=
 project.yaml</pre><pre class=3D"nowrap">$ for object in rolebindings servi=
ceaccounts secrets imagestreamtags cm egressnetworkpolicies rolebindingrest=
rictions limitranges resourcequotas pvc templates cronjobs statefulsets hpa=
 deployments replicasets poddisruptionbudget endpoints
do
  oc get -o yaml --export $object &gt; $object.yaml
done</pre><pre class=3D"nowrap">$ oc api-resources --namespaced=3Dtrue -o n=
ame</pre></td>
</tr>
</tbody>
</table>
</div></li>
</ol>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-RestoreProjectstoSNX2">Restore Pr=
ojects to SNX2</h2>
<ol>
<li><p>Copy the latest backup tar file to the SNX2 bastion.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash plain" style=3D"text-align: left;">$<span>&n=
bsp;</span></code><code class=3D"bash functions" style=3D"text-align: left;=
">tar</code><span>&nbsp;</span><code class=3D"bash plain" style=3D"text-ali=
gn: left;">-xzvf int-dev-us-west-1.2019-08-25.</code><code class=3D"bash fu=
nctions" style=3D"text-align: left;">tar</code><code class=3D"bash plain" s=
tyle=3D"text-align: left;">.gz</code><br>&nbsp;<br>&nbsp;<br><code class=3D=
"bash plain" style=3D"text-align: left;">$<span>&nbsp;</span></code><code c=
lass=3D"bash functions" style=3D"text-align: left;">ls</code><span>&nbsp;</=
span><code class=3D"bash plain" style=3D"text-align: left;">|<span>&nbsp;</=
span></code><code class=3D"bash functions" style=3D"text-align: left;">grep=
</code><span>&nbsp;</span><code class=3D"bash plain" style=3D"text-align: l=
eft;">-ie projects</code><br><code class=3D"bash plain" style=3D"text-align=
: left;">projects</code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li><p>Creates a new directory and copy projects you want to re-import.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash plain" style=3D"text-align: left;">$<span>&n=
bsp;</span></code><code class=3D"bash functions" style=3D"text-align: left;=
">mkdir</code><span>&nbsp;</span><code class=3D"bash plain" style=3D"text-a=
lign: left;">/home/ec2-user/int-dev-west-projects</code><br>&nbsp;&nbsp;<br=
><code class=3D"bash plain" style=3D"text-align: left;">$<span>&nbsp;</span=
></code><code class=3D"bash functions" style=3D"text-align: left;">cp</code=
><span>&nbsp;</span><code class=3D"bash plain" style=3D"text-align: left;">=
-rf<span>&nbsp;</span></code><code class=3D"bash plain" style=3D"text-align=
: left;">/home/ec2-user/projects/aa00002822-horizon-dev-01</code><span>&nbs=
p;</span><code class=3D"bash plain" style=3D"text-align: left;">/home/ec2-u=
ser/int-dev-west-projects</code></p></td>
</tr>
</tbody>
</table>
</div><p><br></p>
<ol>
<li><p>In the directory for each project which has a pipeline (ie, RabbitMQ=
 doesn't have a pipeline), delete the folders for resources other than the =
namespace itself, role bindings, config maps, secrets, resourcequotas, netw=
orkpolicy,limitranges, serviceaccounts<br><br></p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><p style=3D"text-ali=
gn: left;"><code class=3D"bash functions" style=3D"text-align: left;">cd</c=
ode><span>&nbsp;</span><code class=3D"bash plain" style=3D"text-align: left=
;">project1 &amp;&amp;<span>&nbsp;</span></code><code class=3D"bash functio=
ns" style=3D"text-align: left;">rm</code><span>&nbsp;</span><code class=3D"=
bash plain" style=3D"text-align: left;">-rf buildconfigs cronjobs deploymen=
tconfigs deployments egressnetworkpolicies endpoints hpas imagestreams imag=
estreamtags poddistributionbudget podpreset policies policybindings pvc pvc=
s replicasets rolebindingrestrictions roles routes services statefulsets te=
mplates</code></p></td>
</tr>
</tbody>
</table>
</div></li>
<li>Do not do the above for projects which are not deployed with a pipeline=
. RabbitMQ, for example.</li>
</ol></li>
<li><p>Run the following commands to import all objects over.</p>
<div class=3D"table-wrap">
<table class=3D"wrapped confluenceTable" style=3D"text-align: left;">
<colgroup>
<col>
</colgroup>
<tbody style=3D"text-align: left;">
<tr style=3D"text-align: left;">
<td style=3D"text-align: left;" class=3D"confluenceTd"><pre class=3D"nowrap=
">$ oc new-project &lt;projectname&gt;</pre><pre class=3D"nowrap">$ for obj=
ect in rolebindings serviceaccounts secrets imagestreamtags cm egressnetwor=
kpolicies rolebindingrestrictions limitranges resourcequotas pvc templates =
cronjobs statefulsets hpa deployments replicasets poddisruptionbudget endpo=
ints
do
  oc create-f $object.yaml
done</pre></td>
</tr>
</tbody>
</table>
</div><p><br></p><p><br></p></li>
</ol>
<p><br></p>
<h2 id=3D"MovingApplicationfromSNX1toSNX2-RestoreApplicationDatainSNX2">Res=
tore Application Data in SNX2&nbsp;&nbsp;</h2>
<p>This is a second playbook to restore application data to SNX2.&nbsp;A cr=
on job will be created to sync the back up to the SNX2 on a nightly basis.&=
nbsp;</p>
<p>The detailed steps are listed below.</p>
<ol>
<li><p><span style=3D"color: rgb(84,84,84);">Verify that the backup was cop=
ied to SNX2</span></p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ ls -l=
a /tmp/jenkins-backup/
total 8
drwxrwxr-x.  3 user     user   20 Sep  6 11:14 .
drwxrwxrwt. 17 root     root 4096 Sep  6 11:16 ..
drwxrwsrwx. 12 user     user 4096 Sep  6 11:14 jenkins</pre>=20
</div>
</div></li>
<li><p><span style=3D"color: rgb(84,84,84);">Use the<span>&nbsp;</span></sp=
an><code style=3D"text-align: left;">oc rsync</code><span style=3D"color: r=
gb(84,84,84);"><span>&nbsp;</span>tool to copy the data into the running po=
d:</span></p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc rs=
ync /tmp/jenkins-backup/jenkins jenkins-1-37nux:/var/lib</pre>=20
</div>
</div></li>
<li><p><span style=3D"color: rgb(84,84,84);">Restart the application with n=
ew data:</span></p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc de=
lete pod jenkins-1-37nux</pre>=20
</div>
</div></li>
<li><p>Scale down the deployment to 0, and then up again:</p>
<div class=3D"code panel pdl" style=3D"border-width: 1px;">
<div class=3D"codeContent panelContent pdl">=20
<pre class=3D"syntaxhighlighter-pre" data-syntaxhighlighter-params=3D"brush=
: java; gutter: false; theme: Confluence" data-theme=3D"Confluence">$ oc sc=
ale --replicas=3D0 dc/jenkins
$ oc scale --replicas=3D1 dc/jenkins</pre>=20
</div>
</div></li>
</ol>
    </div>
</body>
</html>
------=_Part_26416_1119486648.1608334691236--
